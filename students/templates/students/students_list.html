{% extends "students/base.html" %}
{% load static %}

{% block meta_title %}Студенти{% endblock meta_title %}
{% block title %}База Студентів{% endblock title %}
!{% block content %}

{%with order_by=request.GET.order_by reverse=request.GET.reverse%}
    <!-- Add Student Button -->
<a class="btn btn-primary" href="{% url "students_add" %}">Додати Студента</a>
<script>

$(document).ready(function () {
  console.log("fdfd")
    $('.loadMore1 tr').hide();
    size_li = $(".loadMore1 tr").size();
    x=1;
    $('.loadMore1 tr('+x+')').show();
    $('#loadMore').click(function () {
        x= (x+5 <= size_li) ? x+5 : size_li;
        $('.loadMore1 tr('+x+')').show();
         $('#showLess').show();
        if(x == size_li){
            $('#loadMore').hide();
        }
    });
    $('#showLess').click(function () {
        x=(x-5<0) ? 3 : x-5;
        $('.loadMore1 tr').not('+x+').hide();
        $('#loadMore').show();
         $('#showLess').show();
        if(x == 3){
            $('#showLess').hide();
        }
    });
});
</script>
<ul id="myList"><li>One</li>
<li>Two</li>
<li>Three</li>
<li>Four</li>
<li>Five</li>
<li>Six</li>
<li>Seven</li>
<li>Eight</li>
<li>Nine</li>
<li>Ten</li>
<li>Eleven</li>
<li>Twelve</li>
<li>Thirteen</li>
<li>Fourteen</li>
<li>Fifteen</li></ul>
<div id="loadMore">Load more</div
<div id="showLess">Show Less</div>

<div class='load_more'><!-- Start Students Listing -->

   <table id='loadMore1'>
   <table class="table table-hover table-striped">
     <thead>
       <tr>
        <th><a href="">№</a></th>
        <th>Фото</th>
       </th>
        <th><a href="{% url "home" %}?order_by=first_name{% if order_by == 'first_name' and reverse != '1' %}&amp;reverse=1{% endif %}">Прізвище
{% if order_by == 'first_name' and reverse != '1' %}&uarr;
{% elif order_by == 'first_name' and reverse == '1' %}&darr;
{% endif %}
</a>
<th><a href="{% url "home" %}?order_by=last_name{% if order_by == 'last_name' and reverse != '1' %}&amp;reverse=1{% endif %}">
Ім'я
{% if order_by == 'last_name' and reverse != '1' %}&uarr;
{% elif order_by == 'last_name' and reverse == '1' %}&darr;
{% endif %}
</a></th>
       <th><a href="{% url "home" %}?order_by=ticket{% if order_by == 'ticket' and reverse != '1' %}&amp;reverse=1{% endif %}">№ білету
 {% if order_by == 'ticket' and reverse != '1' %}&uarr;
{% elif order_by == 'ticket' and reverse == '1' %}&darr;
{% endif %}
 </a></th>
        <th>Дії</th>
       </tr>
     </thead>
     <tbody>
 {%endwith%}
      {% for student in students %}
      <tr>
        <td>{{ forloop.counter}}</td>
      <td> {% if student.photo %}
<img class="img-circle" src="{{ student.photo.url }}" heig
ht="30" width="30" />
{% else %}
<img class="img-circle" src="{% static "img/Schloss_Elmau_main_entrance.jpg" %}"
height="30" width="30" />
{% endif %}
</td>
        <td><a title="Редагувати" href="{% url "students_edit" student.id %}">{{student.last_name}}</a></td>
        <td><a title="Редагувати" href="{% url "students_edit" student.id %}">{{student.first_name}}</a></td>
        <td>{{student.ticket}}</td>
        <td>
<div class="dropdown">
<button class="btn btn-default dropdown-toggle"
type="button" data-toggle="dropdown">Дія
<span class="caret"></span>
</button>
<ul class="dropdown-menu" role="menu">
<li role="presentation">
<a role="menuitem" tabindex="-1"
href="/journal/{{student.id}}">Відвідування</a>
</li>
<li role="presentation">
<a role="menuitem" tabindex="-1" href="{% url "students_edit" student.id %}">Редагувати</a>
</li>
<li role="presentation">
<a role="menuitem" tabindex="-1" href="{% url "students_delete" student.id %}">Видалити</a>
</li>
</ul>
</div>
</td>
</tr>
{%endfor%}


</tbody>
</table>
<!-- End Students Listing -->
{% if students.has_other_pages %}
{% with order_by=request.GET.order_by reverse=request.GET.reverse %}
<nav>
<ul class="pagination">
<li>
<a href="{% url "home" %}?page=1&amp;order_by={{ order_by }}&a\
mp;reverse={{ reverse }}">&laquo;</a>
</li>
{% for p in students.paginator.page_range %}
<li {% if students.number == p %}class="active"{% endif %}>
<a href="{% url "home" %}?page={{ p }}&amp;order_by={{ order_b\
y }}&amp;reverse={{ reverse }}">{{ p }}</a>
</li>
{% endfor %}
<li>
<a href="{% url "home" %}?page={{ students.paginator.num_pages\
}}&amp;order_by={{ order_by }}&amp;reverse={{ reverse }}">
&raquo;</a>
</li>
</ul>
</nav>
{% endwith %}
{% endif %}
    </div>
</div>
</div>
{% endblock content %}


   </body>

</html>
